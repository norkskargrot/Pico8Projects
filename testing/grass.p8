pico-8 cartridge // http://www.pico-8.com
version 32
__lua__
grasscols={3,11,11,10,11,10,10,9,10,9}

function _init()
	posx=64
	posy=64
end

function _update()
	if (btn(0)) posx-=1
	if (btn(1)) posx+=1
	if (btn(2)) posy-=1
	if (btn(3)) posy+=1
end

function _draw()
	cls(4)
	fillp(0b0101101001011010|0b.111)
	rectfill(0,0,127,127,5)
	fillp()
	srand(0)
	for i=0,128 do
		for j=0,10 do
			local col=grasscols[ceil(rnd(#grasscols))]
			local x=rnd(128)
			local y=i
			local l=rnd(4)+2
			local sx=x+time()*100
			local lean=sin(sx/128)+
														sin(y/64)+
														sin((y+sx)/180)
			--local col=sin(x/128)+
														--sin(y/64)+
														--sin((y+x)/180)
			--local col=(col+3)/6
			--local col=grasscols[ceil(col*#grasscols)]
			line(x+lean,y-l,x,y,col)
		end
		if i==posy then
			spr(1,posx-4,posy-4)
		end
	end
	drawlogs()
end

function drawlogs()
	print("cpu use=",0,0,7)
	print(stat(1),32,0,7)
	
	print("fps=",0,6,7)
	print(stat(7),16,6,7)
	
	print("memory=",0,12,7)
	print(stat(0),28,12,7)
end
__gfx__
00000000000110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000001441000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070001dffd100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700001d22d100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770001f8888f10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700012222100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000012112100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000011001100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
